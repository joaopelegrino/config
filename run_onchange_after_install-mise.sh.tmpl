#!/bin/bash
# Hash: {{ include "dot_config/mise/config.toml.tmpl" | sha256sum }}
#
# HASHING TRICK (Rio's pattern, copiado do Helm):
# - Este coment√°rio com hash muda SEMPRE que mise config muda
# - chezmoi detecta mudan√ßa e re-executa este script
# - mise reinstala tools atualizados automaticamente!
#
# Sem interven√ß√£o manual necess√°ria! üéâ

echo "üîÑ chezmoi detected mise config change, reinstalling tools..."

if command -v mise &> /dev/null; then
    # Install new/updated tools
    ~/.local/bin/mise install

    # Prune unused versions (cleanup)
    ~/.local/bin/mise prune --yes

    echo "‚úÖ mise tools updated!"
else
    echo "‚ö†Ô∏è  mise not found, skipping tool installation"
    echo "   Run: curl https://mise.run | sh"
fi
